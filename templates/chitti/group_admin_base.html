{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}Group Admin Panel{% endblock %}</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Base CSS -->
    <link rel="stylesheet" href="{% static 'group_admin/css/group_admin_base.css' %}">

    {% block extra_head %}{% endblock %}
</head>

<body>

<!-- ================= SIDEBAR ================= -->
<div class="sidebar">
    <div class="sidebar-header">
        <div class="logo-icon"><i class="fas fa-users-cog"></i></div>
        <h1>Group Admin</h1>
    </div>

    <div class="sidebar-menu">

        <a href="{% url 'accounts:group_admin_dashboard' %}" class="sidebar-link active">
            <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
        </a>

        <a href="{% url 'members:group_admin_profile' %}" class="sidebar-link">
            <i class="fas fa-user-circle"></i><span>Profile</span>
        </a>

        <!-- Groups -->
        <div class="sidebar-item">
            <button class="toggle"><i class="fas fa-layer-group"></i><span>Groups</span></button>
            <div class="submenu">
                <a href="{% url 'chitti:group_management' %}" class="submenu-link"><i class="fas fa-list"></i>Group List</a>
                <a href="{% url 'chitti:add_group' %}" class="submenu-link"><i class="fas fa-plus-circle"></i>Create Group</a>
                <a href="#" class="submenu-link"><i class="fas fa-chart-bar"></i>Reports</a>
            </div>
        </div>

        <!-- Members -->
        <div class="sidebar-item">
            <button class="toggle"><i class="fas fa-users"></i><span>Members</span></button>
            <div class="submenu">
                <a href="{% url 'members:member_list' %}" class="submenu-link"><i class="fas fa-list"></i>Member List</a>
                <a href="{% url 'members:member_create' %}" class="submenu-link"><i class="fas fa-user-plus"></i>Create Member</a>

                {% if request.user.is_authenticated and request.user.staffprofile.role == "group_admin" %}
                <a href="{% url 'chitti:cash_collector_list' %}" class="submenu-link">
                    <i class="fas fa-hand-holding-usd"></i>Cash Collector List
                </a>
                <a href="{% url 'chitti:create_cash_collector' %}" class="submenu-link">
                    <i class="fas fa-user-tie"></i>Add Cash Collector
                </a>
                {% endif %}

                <a href="#" class="submenu-link"><i class="fas fa-chart-bar"></i>Reports</a>
            </div>
        </div>

        <!-- Collections -->
        <div class="sidebar-item">
            <button class="toggle"><i class="fas fa-money-check-alt"></i><span>Collections</span></button>
            <div class="submenu">
                <a href="{% url 'payments:group_payment_create' %}" class="submenu-link"><i class="fas fa-plus-circle"></i>Add Collection</a>
                <a href="{% url 'payments:group_payment_list' %}" class="submenu-link"><i class="fas fa-history"></i>Collection History</a>
            </div>
        </div>

        <!-- Auctions -->
        <div class="sidebar-item">
            <button class="toggle"><i class="fas fa-gavel"></i><span>Auctions</span></button>
            <div class="submenu">
                <a href="{% url 'chitti:auction_list' %}" class="submenu-link"><i class="fas fa-list"></i>Auction List</a>
            </div>
        </div>

        <a href="{% url 'accounts:logout' %}" class="sidebar-link logout-link">
            <i class="fas fa-sign-out-alt"></i>Logout
        </a>

    </div>
</div>

<!-- ================= MAIN CONTENT ================= -->
<div class="main">

    <div class="main-header">
        <div class="welcome-section">
            <h2>
                Welcome back, {{ request.user.get_full_name|default:request.user.username }}
            </h2>
            <p>Here's what's happening with your groups today</p>
        </div>
    </div>

    {% block content %}
    <p>Dashboard Content Goes Here</p>
    {% endblock %}

</div>

<!-- ================= SIDEBAR TOGGLE JS ================= -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggles = document.querySelectorAll('.toggle');

    toggles.forEach(toggle => {
        toggle.addEventListener('click', () => {
            const submenu = toggle.nextElementSibling;
            const isOpen = submenu.style.display === 'block';

            document.querySelectorAll('.submenu').forEach(sm => sm.style.display = 'none');
            document.querySelectorAll('.toggle').forEach(t => t.classList.remove('active'));

            if (!isOpen) {
                submenu.style.display = 'block';
                toggle.classList.add('active');
            }
        });
    });
});
</script>

</body>
</html>
