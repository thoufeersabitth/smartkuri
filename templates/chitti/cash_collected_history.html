{% extends "chitti/group_admin_base.html" %}


{% block title %}Cash Collected History{% endblock %}

{% block content %}
<h2>Cash Collected - {{ request.user.staffprofile.group.name }}</h2>
<p>Total Collected: ₹{{ total_collected }}</p>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Member</th>
            <th>Amount</th>
            <th>Paid Date</th>
            <th>Collector</th>
            <th>Payment Method</th>
        </tr>
    </thead>
    <tbody>
        {% for p in payments %}
        <tr>
            <td>
                {% if p.member %}
                    {{ p.member.name }}
                {% else %}
                    -
                {% endif %}
            </td>

            <td>₹{{ p.amount }}</td>
            <td>{{ p.paid_date }}</td>

            <td>
                {% if p.collected_by %}
                    {{ p.collected_by.user.username }}
                {% else %}
                    Admin
                {% endif %}
            </td>

            <td>{{ p.payment_method }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="text-center">No payments yet.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'payments:group_payment_list' %}" class="btn btn-secondary">Back to Payments</a>
{% endblock %}
