{% extends "collector/collector_base.html" %}
{% load static %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'collector/css/collector_dashboard.css' %}">

<div class="row g-4 mb-4">

    <div class="col-md-6 col-lg-3">
        <div class="stats-card">
            <div class="stats-icon"><i class="fas fa-coins"></i></div>
            <div>
                <div class="stats-title">Today</div>
                <div class="stats-value">₹ {{ today_collection }}</div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-3">
        <div class="stats-card">
            <div class="stats-icon"><i class="fas fa-calendar-alt"></i></div>
            <div>
                <div class="stats-title">This Month</div>
                <div class="stats-value">₹ {{ monthly_collection }}</div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-3">
        <div class="stats-card">
            <div class="stats-icon"><i class="fas fa-wallet"></i></div>
            <div>
                <div class="stats-title">Total</div>
                <div class="stats-value">₹ {{ total_collection }}</div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-3">
        <div class="stats-card">
            <div class="stats-icon"><i class="fas fa-users"></i></div>
            <div>
                <div class="stats-title">Active Members</div>
                <div class="stats-value">{{ active_members }}</div>
            </div>
        </div>
    </div>

</div>

<div class="card p-4">

<h5 class="mb-3 fw-bold">Recent Payments</h5>

{% if recent_payments %}

<div class="table-responsive">

<table class="table">

<thead>
<tr>
<th>Member</th>
<th>Amount</th>
<th>Date</th>
<th>Time</th>
</tr>
</thead>

<tbody>
{% for p in recent_payments %}
<tr>
<td>{{ p.member.name }}</td>
<td class="text-success fw-bold">₹ {{ p.amount }}</td>
<td>{{ p.paid_date }}</td>
<td>{{ p.paid_time }}</td>
</tr>
{% endfor %}
</tbody>

</table>

</div>

{% else %}
<p class="text-muted">No recent payments</p>
{% endif %}

</div>

{% endblock %}
